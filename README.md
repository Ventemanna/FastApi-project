# Тестовое задание для курса Python 

## Описание проекта

Реализация RESTful серивса на основе фреймворка FastApi с поддержкой следующих эндпоинтов: 
- Создание пользователя
- Создание JWT-токена при предявлении логина и пароля
- Просмотр зарплаты и даты следующего повышения при предъявлении JWT-токена
- Просмотр информации всей информации пользователя (Этот запрос был добавлен только в целях тестирования)
- Просмотр конкретного пользователя по id
- Обновление данных о зарплате и дате ее повышения

Дополнительные технические требования:
- Зависимости зафиксированы менеджером зависимостей poetry;
- Написаны тесты с использованием pytest;
- Реализована возможность собирать и запускать контейнер с сервисом в Docker.

## Запуск проекта

Склонируйте репизиторий на ваш компьютер `git@gitlab.com:ventemanna_test_task/fastapi-project.git` и перейдите в рабочую папку `cd fastapi-project`

### Без использования Docker

Удостоверьтесь, что у вас скачан менеджер зависимостей poetry, либо скачайте командой `pip install poetry`

Запустите виртуальное окружение `source $(poetry env info --path)/bin/activate`

Чтобы скачать все библиотеки, напишите команду `poetry install`.

Запустите bash скрипт по создаю баз данных postgres `chmod +x db-init/init_db.sh && db-init/init_db.sh`

Чтобы запустить сервер на локальном компьютере, введите команду `uvicorn app.main:app --host 127.0.0.0 --port 8000`.
Порт можно выбрать произвольный, главное чтобы был свободен.

### С использованием Docker 

Чтобы запустить проект через Docker, воспользуйтесь командой `docker compose build && docker compose up app`.

## Запуск тестов

### Без Docker

Убедитесь, что у вас созданы базы данных `chmod +x init_db.sh && ./init_db.sh`

Для большей наглядности можно сгенерировать отчет по тестам командой `poetry run pytest --cov=. --cov-report=html && open htmlcov/index.html`

### С Docker

Загрузите проект `docker compose build` и запустите сервис tests `docker compose run --rm tests && open htmlcov/index.html`